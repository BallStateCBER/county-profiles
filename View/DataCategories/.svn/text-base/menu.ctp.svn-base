<?php if (! empty($path)): ?>
	<ul class="path">
		<li>
			<?php echo $this->Js->link(
				'Home',
				array(
					'controller' => 'data_categories',
					'action' => 'menu'
				),
				array(
					'update' => '#variable_menu',
					'evalScripts' => true
				)
			); ?>
		</li>
		<?php foreach ($path as $group): ?>
			<li>
				<?php echo $this->Js->link(
					$this->Html->image('arrow-turn-000-left.png').$group['DataCategory']['name'],
					array(
						'controller' => 'data_categories',
						'action' => 'menu',
						$group['DataCategory']['id']
					),
					array(
						'update' => '#variable_menu',
						'evalScripts' => true,
						'escape' => false
					)
				); ?>
			</li>
		<?php endforeach; ?>
	</ul>
	<hr />
<?php endif; ?>

<?php if (empty($menu)): ?>
	Error: No variables found.
<?php else: ?>
	<ul>
		<?php foreach ($menu as $node): ?>
			<li>
				<?php if ($node['is_group']): ?>
					<?php echo $this->Js->link(
						$this->Html->image('folder.gif').$node['name'],
						array(
							'controller' => 'data_categories',
							'action' => 'menu',
							$node['id']
						),
						array(
							'escape' => false,
							'update' => '#variable_menu',
							'evalScripts' => true
						)
					); ?>
				<?php else: ?>
					<?php /* echo $this->Form->input('selected_variables.'.$node['id'], array(
						'label' => $node['name'],
						'type' => 'checkbox',
						'div' => false,
						'hiddenField' => false,
						'id' => 'var_menu_'.$node['id']
					)); */ ?>
					<?php echo $this->Js->link(
						$this->Html->image('leaf.gif').$node['name'],
						'#',
						array(
							'escape' => false,
							
							//'id' => 'var_menu_'.$node['id'],
							
						)
					); ?>
					<?php /* $this->Js->buffer("
						Event.observe('var_menu_{$node['id']}', 'click', function(event) {
							event.stop();
							select_variable({$node['id']});
						});
					"); */ ?>
				<?php endif; ?>
			</li>
		<?php endforeach; ?>
	</ul>
<?php endif; ?>